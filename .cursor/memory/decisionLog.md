# Decision Log

## 重要な技術的決定とその理由（ADR）

### ADR-001: Next.js 15 App Routerの採用
**決定**: Next.js 15のApp Routerを使用
**理由**: 
- Server Componentsによるパフォーマンス向上
- ファイルベースルーティングの簡潔さ
- Vercelとの統合によるデプロイの容易さ

**影響**: 全てのページは`app/`ディレクトリに配置

---

### ADR-002: shadcn/uiコンポーネントライブラリの採用
**決定**: カスタムUIコンポーネントではなくshadcn/uiを使用
**理由**:
- カスタマイズ可能
- アクセシビリティ対応済み
- メンテナンス不要（コピー&ペースト方式）

**影響**: UIコンポーネントは`src/components/ui/`に配置、必要時のみ追加

---

### ADR-003: React Context APIによる状態管理
**決定**: ReduxやZustandではなく、React Context APIを使用
**理由**:
- 状態が比較的シンプル（天気データのみ）
- 追加の依存関係が不要
- 学習コストが低い

**影響**: `WeatherContext`で天気データを管理

---

### ADR-004: CSSアニメーションによる天気エフェクト
**決定**: Canvas APIやWebGLではなく、CSSアニメーションを使用
**理由**:
- パフォーマンスが良い
- 実装がシンプル
- メンテナンスが容易

**影響**: `globals.css`にアニメーション定義、`WeatherAnimation`コンポーネントで適用

---

### ADR-005: 固定のtop色によるUI視認性確保
**決定**: 全グラデーションに固定色（#FAFAFA）を最上部に追加
**理由**:
- 上部UI（WeatherMonitor）の視認性を常に確保
- 全天気パターンでアイコンの視認性を保証
- シンプルな実装

**影響**: `BackgroundGradient`インターフェースに`top`プロパティ追加

---

### ADR-006: テストパネルのメインUI統合
**決定**: 開発専用ページを削除し、メインUI上にテストパネルを配置
**理由**:
- 実際のUIで直接テストできる
- 開発フローが簡潔
- デプロイ時に不要なページを削除する必要がない

**影響**: `WeatherTestPanel`コンポーネントをメインUIに統合

---

### ADR-007: 選択時の自動適用
**決定**: 適用ボタンを削除し、選択時に即座に反映
**理由**:
- ユーザー体験の向上（1タップで変更）
- 開発効率の向上

**影響**: `WeatherTestPanel`の実装を簡素化

---

### ADR-008: 時間帯判定のロジック
**決定**: 時間帯を4つに分類（朝: 6-9時、昼: 9-17時、夕方: 17-19時、夜: その他）
**理由**:
- シンプルで理解しやすい
- 背景色の変化が明確

**影響**: `getTimeOfDay`関数の実装

